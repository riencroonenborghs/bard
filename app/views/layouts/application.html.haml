!!!
%html
  %head
    %title
      Bard
      = yield :meta_title
    %meta(name="viewport" content="width=device-width, initial-scale=1")
    %meta(name="turbo-prefetch" content="false")
    = csrf_meta_tags
    = csp_meta_tag
    = stylesheet_link_tag "tailwind", "data-turbo-track": "reload"
    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = javascript_importmap_tags
    -# = javascript_import_module_tag :bardPlayer
    = yield :head

    %body.bg-gray-800.text-gray-300
      .flex.flex-row
        .w-64.bg-gray-600.text-white(style="height: calc(100vh)")
          .flex.flex-col
            .flex.flex-row.w-full.justify-center.pt-8
              = link_to root_path, "data-turbo-frame" => "content" do
                .text-4xl.uppercase.text-gray-400.font-bold
                  Bard
            
            .p-8
              .text-lg.uppercase.text-gray-500 menu

            = link_to artists_path, "data-turbo-frame" => "content", class: "ps-8 pe-8 pt-2 pb-2" do
              .flex.flex-row.justify-between
                %div Artists
                .rounded-lg.shadow-sm.bg-gray-700.text-xs.p-1.font-thin
                  = artist_count

            = link_to albums_path, "data-turbo-frame" => "content", class: "ps-8 pe-8 pt-2 pb-2" do
              .flex.flex-row.justify-between
                %div Albums
                .rounded-lg.shadow-sm.bg-gray-700.text-xs.p-1.font-thin
                  = album_count

            = link_to tracks_path, "data-turbo-frame" => "content", class: "ps-8 pe-8 pt-2 pb-2" do
              .flex.flex-row.justify-between
                %div Tracks
                .rounded-lg.shadow-sm.bg-gray-700.text-xs.p-1.font-thin
                  = track_count
        .w-full.overflow-auto(style="height: calc(100vh);")
          = turbo_frame_tag "content" do
            = yield

      %turbo-frame#player

      .sticky.bottom-0.w-full.bg-gray-700(data-controller="player")
        .flex.flex-col
          .border-t.border-gray-500.hidden.flex.flex-row.justify-end.p-2(data-player-target="playlistUI" style="max-height: 350px")
            .flex.flex-col
              .pb-2.font-bold.text-3xl Playlist
              .overflow-scroll(data-player-target="playlistItems")

          %progress.w-full.bg-gray-700(data-player-target="progressbar")
          .flex.flex-row.p-3.pt-6.pb-6.justify-between.items-center
            .flex.flex-row.items-center
              .cursor-pointer(data-action="click->player#pause" data-player-target="pauseButton")
                = render IconComponent.new(name: :pause, size: 4)
              .hidden.cursor-pointer(data-action="click->player#play" data-player-target="playButton")
                = render IconComponent.new(name: :play, size: 4)
              .flex.flex-row.font-thin.ms-4
                %span(data-player-target="currentTrackElapsed") 00:00
                .ms-1.me-1 &mdash;
                %span(data-player-target="currentTrackDuration") 00:00
            .flex.flex-row
              .bardplayer--cover-image
              .bardplayer--cover-icon
                = render IconComponent.new(name: :album, size: 6)
              .ms-4.flex.flex-col
                .font-bold.text-md(data-player-target="currentTrackTitle")
                  TITLE
                .font-thin.text-sm
                  = link_to "empty", "data-turbo-frame" => "content", class: "bardplayer--track-artist", "data-player-target" => "currentTrackArtist" do
                    ARTIST
                  &mdash;
                  = link_to "empty", "data-turbo-frame" => "content", class: "bardplayer--track-album", "data-player-target" => "currentTrackAlbum" do
                    ALBUM
            %div
              .flex.flex-row.items-center.hidden(data-player-target="playlistButtons")
                .me-2.font-thin(data-player-target="playlistSize")
                .cursor-pointer(data-action="click->player#showPlaylist" data-player-target="showPlaylistButton")
                  = render IconComponent.new(name: :chevron_up, size: 4)
                .hidden.cursor-pointer(data-action="click->player#hidePlaylist" data-player-target="hidePlaylistButton")
                  = render IconComponent.new(name: :chevron_down, size: 4)

    -# = render "/layouts/flash_messages"